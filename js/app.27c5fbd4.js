(function(t){function i(i){for(var a,r,c=i[0],o=i[1],l=i[2],d=0,f=[];d<c.length;d++)r=c[d],e[r]&&f.push(e[r][0]),e[r]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);u&&u(i);while(f.length)f.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,i=0;i<s.length;i++){for(var n=s[i],a=!0,c=1;c<n.length;c++){var o=n[c];0!==e[o]&&(a=!1)}a&&(s.splice(i--,1),t=r(r.s=n[0]))}return t}var a={},e={app:0},s=[];function r(i){if(a[i])return a[i].exports;var n=a[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,i,n){r.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,i){if(1&i&&(t=r(t)),8&i)return t;if(4&i&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var a in t)r.d(n,a,function(i){return t[i]}.bind(null,a));return n},r.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(i,"a",i),i},r.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},r.p="/weatherVuejs/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=i,c=c.slice();for(var l=0;l<c.length;l++)i(c[l]);var u=o;s.push([0,"chunk-vendors"]),n()})({0:function(t,i,n){t.exports=n("56d7")},"034f":function(t,i,n){"use strict";var a=n("64a9"),e=n.n(a);e.a},"0ba4":function(t,i,n){},1886:function(t,i,n){},"2a77":function(t,i,n){},"3c6b":function(t,i,n){"use strict";var a=n("0ba4"),e=n.n(a);e.a},"4de9":function(t,i,n){},"56d7":function(t,i,n){"use strict";n.r(i);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),e=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{class:{dark:t.isDark},attrs:{id:"app"}},[n("h4",{staticClass:"toggle-color-mode"},[t._v("\n        THEME\n        "),n("i",{staticClass:"big icon circle",on:{click:t.toggleColorTheme}})]),n("div",{staticClass:"ui container"},[n("div",{staticClass:"search"},[n("search-location",{attrs:{cities:t.filteredCities,"is-dark":t.isDark},on:{"search-submit":function(i){return t.loadData(t.inputLocation)}},model:{value:t.inputLocation,callback:function(i){t.inputLocation=i},expression:"inputLocation"}}),n("div",{staticClass:"ui hidden divider"}),n("error-message",{attrs:{error:t.err}})],1),n("div",{staticClass:"ui divider"}),t.loading||0!==t.err.length?t._e():n("div",{staticClass:"weather-content"},[n("actual-weather",{attrs:{datas:t.apiData}}),n("div",{staticClass:"ui divider"}),n("previsions",{attrs:{datas:t.apiData,"is-dark":t.isDark}})],1),t.loading?n("div",{staticClass:"ui active dimmer"},[n("div",{staticClass:"ui text large loader"},[t._v("Chargement ...")])]):t._e()])])},s=[],r=(n("7f7f"),n("55dd"),n("a4bb")),c=n.n(r),o=(n("3b2b"),n("4917"),function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"actual-weather"},[n("div",{staticClass:"ui stackable grid"},[n("div",{staticClass:"row"},[n("div",{staticClass:"sixteen column center aligned "},[n("h3",[n("i",{staticClass:"map marker alternate icon"}),t._v(t._s(t.weatherLocation()))])])]),n("div",{staticClass:"three column row"},[n("div",{staticClass:"column left aligned"},[n("p",[n("i",{staticClass:"sun  icon"}),t._v(" "+t._s(t.actualSunrise()))]),n("p",[n("i",{staticClass:"moon icon"}),t._v(" "+t._s(t.actualSunset()))]),n("p",{staticClass:"actual-condition-details"},[t._m(0),t._v("\n                    "+t._s(t.actualHumidity())+"\n                ")]),n("p",[n("i",{staticClass:"flag icon"}),t._v(t._s(t.actualWind()))])]),n("div",{staticClass:"column center aligned"},[n("img",{attrs:{src:t.actualWeatherIcon(),alt:""}}),n("p",{staticClass:"actual-condition"},[t._v(t._s(t.actualWeatherCondition()))])]),n("div",{staticClass:"column center aligned"},[n("p",{staticClass:"actual-temp"},[n("i",{staticClass:"thermometer half icon"}),t._v(t._s(t.actualWeatherTemp())+" "),n("span",{staticClass:"temp-min"},[t._v(" ("+t._s(t.tempMin())+" | "+t._s(t.tempMax())+") ")])])])])])])}),l=[function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("i",{staticClass:"icons"},[n("i",{staticClass:"tint icon"}),n("i",{staticClass:"inverted corner percent icon"})])}],u=(n("ac6a"),n("28a5"),{name:"ActualWeather",props:{datas:Object},methods:{actualWeatherIcon:function(){return this.datas.current_condition.icon_big?this.datas.current_condition.icon_big:""},weatherLocation:function(){return this.datas.city_info.name?this.datas.city_info.name+", "+this.datas.city_info.country:""},weatherPostalCode:function(){return this.datas.city_info.npa?this.datas.city_info.npa:""},actualWeatherTemp:function(){return this.datas.current_condition.tmp?this.datas.current_condition.tmp+"°C":""},actualWeatherCondition:function(){return this.datas.current_condition.condition?this.datas.current_condition.condition:""},tempMin:function(){return this.datas.fcst_day_0?this.datas.fcst_day_0.tmin+"°C":""},tempMax:function(){return this.datas.fcst_day_0?this.datas.fcst_day_0.tmax+"°C":""},actualHumidity:function(){return this.datas.current_condition.condition?this.datas.current_condition.humidity+"%":""},actualSunrise:function(){return this.datas.city_info.name?this.datas.city_info.sunrise:""},actualSunset:function(){return this.datas.city_info.name?this.datas.city_info.sunset:""},actualWind:function(){return this.datas.current_condition.condition?this.datas.current_condition.wnd_spd+" km/h "+this.windDirToString(this.actualWindDir()):""},actualWindDir:function(){return this.datas.current_condition.condition?this.datas.current_condition.wnd_dir:""},windDirToString:function(t){var i={N:"Nord ",S:"Sud ",E:"Est ",O:"Ouest "},n=t.split(""),a="";return n.forEach(function(t){a+=i[t]}),a}}}),d=u,f=(n("c5bb"),n("2877")),h=Object(f["a"])(d,o,l,!1,null,"ee3622ec",null),p=h.exports,v=function(){var t=this,i=t.$createElement,n=t._self._c||i;return t.error.length>0?n("div",{staticClass:"error"},[n("div",{staticClass:"ui icon negative message"},[n("i",{staticClass:"info circle icon"}),n("div",{staticClass:"content"},[n("div",{staticClass:"header"},[t._v(t._s(t.error))])])])]):t._e()},m=[],_={name:"ErrorMessage",props:{error:String}},C=_,g=Object(f["a"])(C,v,m,!1,null,null,null),y=g.exports,b=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"previsions"},[n("div",{staticClass:"ui five column stackable grid internally celled"},t._l(t.range(0,4),function(i){return n("div",{staticClass:"column "},[n("div",{staticClass:"ui one column grid prevision-col"},[n("div",{staticClass:"column center aligned"},[n("h4",{staticClass:"previsions-day"},[t._v(t._s(t.stringDay(i)))])]),n("div",{staticClass:"two column row"},[n("div",{staticClass:"column center aligned"},[n("img",{attrs:{src:t.weatherDayIcon(i)}})]),n("div",{staticClass:"column middle aligned center aligned"},[n("div",{staticClass:"previsions-temp-min-max"},[n("p",[t._v(t._s(t.tempMin(i)))]),n("div",{staticClass:"ui divider"}),n("p",[t._v(t._s(t.tempMax(i)))])])])]),n("div",{staticClass:"column center aligned"},[n("span",[t._v(t._s(t.dayCondition(i)))])]),n("div",{staticClass:"column center aligned"},[n("button",{staticClass:"ui icon button small grey",class:{inverted:t.isDark},on:{click:function(n){return t.showDetails(i)}}},[t._v("Voir le détail "),n("i",{staticClass:"plus circle icon"})])])]),n("modal",{ref:"modal",refInFor:!0,attrs:{date:t.date(i),day:t.stringDay(i),id:"myModal"+i,"is-dark":t.isDark}},[n("div",{staticClass:"previsions-details",attrs:{"data-details":i}},[n("div",{staticClass:"ui stackable grid details-column"},t._l(t.datas["fcst_day_"+i]["hourly_data"],function(i,a){return n("div",{staticClass:"three column row"},[n("div",{staticClass:"column middle aligned"},[n("i",{staticClass:"icon clock outline"}),t._v(" "+t._s(a)+"\n                            ")]),n("div",{staticClass:"column"},[n("img",{attrs:{src:i.ICON}}),n("p",[t._v(t._s(i.CONDITION))])]),n("div",{staticClass:"column middle aligned"},[n("p",[n("i",{staticClass:"thermometer half icon"}),t._v(" "+t._s(i.TMP2m)+" °C\n                                ")]),parseFloat(i.APCPsfc)>0?n("p",[n("i",{staticClass:"tint icon"}),t._v(" "+t._s(i.APCPsfc)+" mm\n                                ")]):t._e()]),n("hr")])}),0)])])],1)}),0)])},w=[],k=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"modal",attrs:{id:t.id}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[n("span",{staticClass:"closeModal",on:{click:function(i){return t.closeModal()}}},[t._v("×")]),n("h2",{staticClass:"modal-title"},[t._v(t._s(t.day)+" ("+t._s(t.date)+")")])]),n("div",{staticClass:"modal-body",class:{dark:t.isDark}},[t._t("default")],2)])])},D=[],x={name:"Modal",data:function(){return{show:!1}},props:{id:String,date:String,day:String,isDark:Boolean},methods:{closeModal:function(){this.show=!1,document.removeEventListener("click",this.clickOut)},openModal:function(){this.show=!0,document.addEventListener("click",this.clickOut)},clickOut:function(t){t.target==this.$el&&this.closeModal()}}},O=x,S=(n("e3c1"),Object(f["a"])(O,k,D,!1,null,"272007f8",null)),M=S.exports,j={name:"Previsions",props:{datas:Object,isDark:Boolean},components:{Modal:M},methods:{range:function(t,i){for(var n=[],a=0,e=t;e<=i;e++)n[a]=e,a++;return n},weatherDayIcon:function(t){var i="fcst_day_"+t;return this.datas.fcst_day_0?this.datas[i]["icon_big"]:""},stringDay:function(t){var i="fcst_day_"+t;return 0===t?"Aujourd'hui":this.datas.fcst_day_0?this.datas[i]["day_long"]:""},dayCondition:function(t){var i="fcst_day_"+t;return this.datas.fcst_day_0?this.datas[i]["condition"]:""},tempMin:function(t){var i="fcst_day_"+t;return this.datas.fcst_day_0?this.datas[i]["tmin"]+"°C":""},tempMax:function(t){var i="fcst_day_"+t;return this.datas.fcst_day_0?this.datas[i]["tmax"]+"°C":""},date:function(t){var i="fcst_day_"+t;return this.datas.fcst_day_0?this.datas[i]["date"]:""},showDetails:function(t){this.$refs.modal[t].openModal()}}},L=j,E=(n("3c6b"),Object(f["a"])(L,b,w,!1,null,"07f2225c",null)),P=E.exports,$=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"input-location"},[n("div",{staticClass:"ui action fluid input"},[n("input",{attrs:{id:"location",autocomplete:"off",placeholder:"Ville ou code postal..."},on:{focus:function(i){return t.updateLocation(i.target.value)},input:function(i){return t.updateLocation(i.target.value)},keydown:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.searchSubmit(i)}}}),n("button",{staticClass:"ui grey button",class:{inverted:t.isDark},on:{click:t.searchSubmit}},[t._v("Go")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.cities.length>0,expression:"cities.length > 0"}],attrs:{id:"cities"}},t._l(t.cities,function(i){return n("div",{staticClass:"city",on:{click:function(n){return t.fillInput(i.url)}}},[t._v(t._s(i.name)+", "+t._s(i.npa)+" ("+t._s(i.country)+")")])}),0)])},W=[],T={name:"SearchLocation",props:{cities:Array,isDark:Boolean},methods:{updateLocation:function(t){this.$emit("input",t),document.querySelector("#cities").style.display="block"},searchSubmit:function(){this.$emit("search-submit")},fillInput:function(t){document.querySelector("#cities").style.display="none",this.$parent.loadData(t)}}},I=T,N=(n("d7ee"),Object(f["a"])(I,$,W,!1,null,"20d04053",null)),A=N.exports,q="https://www.prevision-meteo.ch/services/json/",F="https://cors.io/?https://www.prevision-meteo.ch/services/json/list-cities",B={name:"app",data:function(){return{apiData:{},apiCities:[],filteredCities:[],inputLocation:"",loading:!1,err:"",isDark:!1}},components:{ErrorMessage:y,SearchLocation:A,ActualWeather:p,Previsions:P},methods:{loadData:function(t){var i=this;this.loading=!0,fetch(q+t).then(function(t){return t.json()}).then(function(t){t.errors?i.err="Nous ne trouvons pas cet emplacement, veuillez en saisir un autre":i.apiData=t}).catch(function(t){console.log(t),i.err="Une erreur s'est produite au chargement des données météo"}).finally(function(){return i.loading=!1},this.err="")},filterCities:function(t,i){this.filteredCities=this.apiCities.filter(function(n){var a=null!=n[t]?n[t]:"";return null!==a.match(i)})},setFilteredCities:function(){if(this.filteredCities=[],this.inputLocation.length>=3&&null!=this.inputLocation.match(/^[0-9]+$/)){var t=new RegExp("^"+this.inputLocation,"gi");this.filterCities("npa",t)}else if(this.inputLocation.length>=3&&null!=this.inputLocation.match(/[A-Z]+$/i)){var i=new RegExp("^"+this.inputLocation,"gi");this.filterCities("name",i)}},toggleColorTheme:function(){this.isDark=!this.isDark}},watch:{inputLocation:function(){this.setFilteredCities()},filteredCities:function(){if(console.log(this.filteredCities),this.filteredCities.length>0){var t=document.querySelector("#cities"),i=document.querySelector("#location");t.style.width=i.offsetWidth+"px",window.onclick=function(n){n.target!=t&&n.target!=i&&(t.style.display="none")}}this.filteredCities.length>=20&&(this.filteredCities.length=20)}},created:function(){var t=this;this.loadData("Paris"),fetch(F).then(function(t){return t.json()}).then(function(i){t.apiCities=c()(i).map(function(t){var n=i[t];return n.key=t,n}),t.apiCities.sort(function(t,i){return t.name<i.name?-1:t.name>i.name?1:0})}).catch(function(i){console.log(i),t.err="Une erreur s'est produite au chargement des villes"}).finally(function(){return t.loading=!1},this.err="")}},H=B,V=(n("034f"),Object(f["a"])(H,e,s,!1,null,null,null)),J=V.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(J)}}).$mount("#app")},"64a9":function(t,i,n){},c5bb:function(t,i,n){"use strict";var a=n("4de9"),e=n.n(a);e.a},d7ee:function(t,i,n){"use strict";var a=n("1886"),e=n.n(a);e.a},e3c1:function(t,i,n){"use strict";var a=n("2a77"),e=n.n(a);e.a}});
//# sourceMappingURL=app.27c5fbd4.js.map